var _=document.getElementById("checkAll");_&&(_.onclick=function(){for(var e=document.querySelectorAll('.form-check-all input[type="checkbox"]'),t=document.querySelectorAll('.form-check-all input[type="checkbox"]:checked').length,a=0;a<e.length;a++)e[a].checked=this.checked,e[a].checked?e[a].closest("tr").classList.add("table-active"):e[a].closest("tr").classList.remove("table-active");t>0?document.getElementById("remove-actions").style.display="none":document.getElementById("remove-actions").style.display="block"});var E=8,k=!1,D={valueNames:["id","project_name","tasks_name","client_name","assignedto","due_date","status","priority"],page:E,pagination:!0,plugins:[ListPagination({left:2,right:2})]},l=new List("tasksList",D).on("updated",function(e){e.matchingItems.length==0?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var t=e.i==1,a=e.i>e.matchingItems.length-e.page;document.querySelector(".pagination-prev.disabled")&&document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),t&&document.querySelector(".pagination-prev").classList.add("disabled"),a&&document.querySelector(".pagination-next").classList.add("disabled"),e.matchingItems.length<=E?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",e.matchingItems.length==E&&document.querySelector(".pagination.listjs-pagination").firstElementChild.children[0].click(),e.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"});const x=new XMLHttpRequest;x.onload=function(){var e=JSON.parse(this.responseText);Array.from(e).forEach(function(t){var a=t.assignedto,s=3,n='<div class="avatar-group flex-nowrap">';if(Array.from(a.slice(0,s)).forEach(function(i){n+='<a href="javascript: void(0);" class="avatar-group-item" data-img="'+i.assigneeImg+'"  data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="'+i.assigneeName+'">                <img src="'+i.assigneeImg+'" alt="" class="rounded-circle avatar-xxs" />            </a>'}),a.length>s){var r=a.length-s;n+='<a href="javascript: void(0);" class="avatar-group-item"  data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="'+r+' More">            <div class="avatar-xxs">            <div class="avatar-title rounded-circle">'+r+"+</div>            </div>        </a>"}n+="</div>",l.add({id:'<a href="apps-tasks-details" class="fw-medium link-primary">#VLZ'+t.id+"</a>",project_name:'<a href="apps-projects-overview" class="fw-medium link-primary">'+t.project_name+"</a>",tasks_name:t.tasks_name,client_name:t.client_name,assignedto:n,due_date:t.due_date,status:w(t.status),priority:B(t.priority)}),l.sort("id",{order:"desc"}),T(),I()}),l.remove("id",'<a href="apps-tasks-details" class="fw-medium link-primary">#VLZ501</a>')};x.open("GET","build/json/tasks-list.json");x.send();isCount=new DOMParser().parseFromString(l.items.slice(-1)[0]._values.id,"text/html");isCount.body.firstElementChild.innerHTML;var S=document.getElementById("tasksId"),m=document.getElementById("projectName-field"),p=document.getElementById("tasksTitle-field"),g=document.getElementById("clientName-field"),P="Demo Assign",v=document.getElementById("duedate-field"),c=document.getElementById("priority-field"),d=document.getElementById("ticket-status");document.getElementById("add-btn");document.getElementById("edit-btn");var q=document.getElementsByClassName("remove-item-btn"),M=document.getElementsByClassName("edit-item-btn");T();function I(){var e=document.querySelectorAll('[data-bs-toggle="tooltip"]');[...e].map(t=>new bootstrap.Tooltip(t))}document.getElementById("showModal").addEventListener("show.bs.modal",function(e){e.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit Task",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Update"):e.relatedTarget.classList.contains("add-btn")?(document.getElementById("exampleModalLabel").innerHTML="Add Task",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Add Task"):(document.getElementById("exampleModalLabel").innerHTML="List Task",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")});document.getElementById("showModal").addEventListener("hidden.bs.modal",function(){L()});document.querySelector("#tasksList").addEventListener("click",function(){V()});var F=document.getElementById("tasksTable");F.getElementsByTagName("tr");F.querySelectorAll(".list tr");var C=11,O=document.querySelectorAll(".tablelist-form");Array.prototype.slice.call(O).forEach(function(e){e.addEventListener("submit",function(t){if(!e.checkValidity())t.preventDefault(),t.stopPropagation();else if(t.preventDefault(),m.value!==""&&p.value!==""&&g.value!==""&&v.value!==""&&c.value!==""&&d.value!==""&&!k)l.add({id:'<a href="apps-tasks-details" class="fw-medium link-primary">#VLZ'+C+"</a>",project_name:'<a href="apps-projects-overview" class="fw-medium link-primary">'+m.value+"</a>",tasks_name:p.value,client_name:g.value,assignedto:j(),due_date:A(v.value),status:w(d.value),priority:B(c.value)}),l.sort("id",{order:"desc"}),document.getElementById("close-modal").click(),L(),T(),I(),C++,Swal.fire({position:"center",icon:"success",title:"Task inserted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0});else if(m.value!==""&&p.value!==""&&g.value!==""&&v.value!==""&&c.value!==""&&d.value!==""&&k){var a=l.get({id:S.value});Array.from(a).forEach(function(s){isid=new DOMParser().parseFromString(s._values.id,"text/html");var n=isid.body.firstElementChild.innerHTML;n==itemId&&s.values({id:'<a href="javascript:void(0);" class="fw-medium link-primary">'+S.value+"</a>",project_name:'<a href="apps-projects-overview" class="fw-medium link-primary">'+m.value+"</a>",tasks_name:p.value,client_name:g.value,assignedto:j(),due_date:A(v.value),status:w(d.value),priority:B(c.value)})}),document.getElementById("close-modal").click(),L(),I(),Swal.fire({position:"center",icon:"success",title:"Task updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}},!1)});var u=new Choices(c,{searchEnabled:!1}),o=new Choices(d,{searchEnabled:!1});function V(){Array.from(document.getElementsByName("chk_child")).forEach(function(e){e.addEventListener("change",function(t){e.checked==!0?t.target.closest("tr").classList.add("table-active"):t.target.closest("tr").classList.remove("table-active");var a=document.querySelectorAll('[name="chk_child"]:checked').length;t.target.closest("tr").classList.contains("table-active"),a>0?document.getElementById("remove-actions").style.display="block":document.getElementById("remove-actions").style.display="none"})})}function T(){q&&Array.from(q).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var a=l.get({id:itemId});Array.from(a).forEach(function(s){deleteid=new DOMParser().parseFromString(s._values.id,"text/html");var n=deleteid.body.firstElementChild,r=deleteid.body.firstElementChild.innerHTML;r==itemId&&document.getElementById("delete-record").addEventListener("click",function(){l.remove("id",n.outerHTML),document.getElementById("deleteRecord-close").click()})})})}),M&&Array.from(M).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var a=l.get({id:itemId});Array.from(a).forEach(function(s){isid=new DOMParser().parseFromString(s._values.id,"text/html");var n=isid.body.firstElementChild.innerHTML;if(n==itemId){k=!0,S.value=n,project=new DOMParser().parseFromString(s._values.project_name,"text/html");var r=project.body.firstElementChild.innerHTML;o.setChoiceByValue(i),m.value=r,p.value=s._values.tasks_name,g.value=s._values.client_name,v.value=s._values.due_date,Array.from(document.querySelectorAll('input[name="assignedTo[]"]')).forEach(function(h){var b=h.parentElement,y=b.querySelector(".flex-grow-1").innerHTML,N=new DOMParser().parseFromString(s._values.assignedto,"text/html");N.querySelectorAll(".avatar-group .avatar-group-item").forEach(function(H){H.getAttribute("data-bs-title")==y&&(h.checked=!0)})}),o&&o.destroy(),o=new Choices(d,{searchEnabled:!1}),val=new DOMParser().parseFromString(s._values.status,"text/html");var i=val.body.firstElementChild.innerHTML;o.setChoiceByValue(i),u&&u.destroy(),u=new Choices(c,{searchEnabled:!1}),val=new DOMParser().parseFromString(s._values.priority,"text/html");var f=val.body.firstElementChild.innerHTML;u.setChoiceByValue(f),flatpickr("#duedate-field",{dateFormat:"d M, Y",defaultDate:s._values.due_date})}})})})}function L(){m.value="",p.value="",g.value="",P.value="",v.value="",document.querySelectorAll('input[name="assignedTo[]"]').forEach(function(e){e.checked=!1}),u&&u.destroy(),u=new Choices(c),o&&o.destroy(),o=new Choices(d)}document.querySelector(".pagination-next").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click()});document.querySelector(".pagination-prev").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click()});function w(e){switch(e){case"Pending":return'<span class="badge bg-warning-subtle text-warning text-uppercase">'+e+"</span>";case"Inprogress":return'<span class="badge bg-secondary-subtle text-secondary text-uppercase">'+e+"</span>";case"Completed":return'<span class="badge bg-success-subtle text-success text-uppercase">'+e+"</span>";case"New":return'<span class="badge bg-info-subtle text-info text-uppercase">'+e+"</span>"}}function B(e){switch(e){case"High":return'<span class="badge bg-danger text-uppercase">'+e+"</span>";case"Low":return'<span class="badge bg-success text-uppercase">'+e+"</span>";case"Medium":return'<span class="badge bg-warning text-uppercase">'+e+"</span>"}}function A(e){var t=new Date(e),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+a+", "+t.getFullYear()}function j(){var e=[],t=document.querySelectorAll('input[name="assignedTo[]"]:checked');Array.from(t).forEach(function(i){var f=i.parentElement,h=f.querySelector(".avatar-xxs").getAttribute("src"),b=f.querySelector(".flex-grow-1").innerHTML,y={};y.assigneeName=b,y.assigneeImg=h,e.push(y)});var a=e,s=3,n='<div class="avatar-group flex-nowrap">';if(Array.from(a.slice(0,s)).forEach(function(i){n+='<a href="javascript: void(0);" class="avatar-group-item" data-img="'+i.assigneeImg+'"  data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="'+i.assigneeName+'">            <img src="'+i.assigneeImg+'" alt="" class="rounded-circle avatar-xxs" />        </a>'}),a.length>s){var r=a.length-s;n+='<a href="javascript: void(0);" class="avatar-group-item"  data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="'+r+' More">        <div class="avatar-xxs">        <div class="avatar-title rounded-circle">'+r+"+</div>        </div>    </a>"}return n+="</div>",n}
