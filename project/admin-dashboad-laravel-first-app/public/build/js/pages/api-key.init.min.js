var y=document.getElementById("checkAll");y&&(y.onclick=function(){for(var e=document.querySelectorAll('.form-check-all input[type="checkbox"]'),t=document.querySelectorAll('.form-check-all input[type="checkbox"]:checked').length,n=0;n<e.length;n++)e[n].checked=this.checked,e[n].checked?e[n].closest("tr").classList.add("table-active"):e[n].closest("tr").classList.remove("table-active");t>0?document.getElementById("remove-actions").style.display="none":document.getElementById("remove-actions").style.display="block"});var c=8,E={valueNames:["id","name","createBy","apikey","status","create_date","expiry_date"],page:c,pagination:!0,plugins:[ListPagination({left:2,right:2})]},i=new List("apiKeyList",E).on("updated",function(e){e.matchingItems.length==0?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var t=e.i==1,n=e.i>e.matchingItems.length-e.page;document.querySelector(".pagination-prev.disabled")&&-document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),t&&document.querySelector(".pagination-prev").classList.add("disabled"),n&&document.querySelector(".pagination-next").classList.add("disabled"),e.matchingItems.length<=c?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",e.matchingItems.length==c&&document.querySelector(".pagination.listjs-pagination").firstElementChild.children[0].click(),e.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"});const m=new XMLHttpRequest;m.onload=function(){var e=JSON.parse(this.responseText);Array.from(e).forEach(function(t){i.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ'+t.id+"</a>",name:t.name,createBy:t.createBy,apikey:'<input type="text" class="form-control apikey-value" readonly value="'+t.apikey+'">',status:g(t.status),create_date:t.create_date,expiry_date:t.expiry_date}),i.sort("id",{order:"desc"}),t.status=="Active"?document.querySelector(".disable-btn").innerHTML="Disable":t.status=="Disable"&&(document.querySelector(".disable-btn").innerHTML="Enable"),u()}),i.remove("id",'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ001</a>')};m.open("GET","build/json/api-key-list.json");m.send();function g(e){switch(e){case"Disable":return'<span class="badge bg-danger-subtle text-danger">'+e+"</span>";case"Active":return'<span class="badge bg-success-subtle text-success">'+e+"</span>"}}document.getElementById("api-key-modal").addEventListener("show.bs.modal",function(e){e.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Rename API name",document.getElementById("api-key-modal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").style.display="none",document.getElementById("createApi-btn").style.display="none",document.getElementById("edit-btn").style.display="block"):e.relatedTarget.classList.contains("create-btn")?(document.getElementById("exampleModalLabel").innerHTML="Create API Key",document.getElementById("api-key-modal").querySelector(".modal-footer").style.display="block",document.getElementById("edit-btn").style.display="none",document.getElementById("createApi-btn").style.display="block",document.getElementById("add-btn").style.display="none"):e.relatedTarget.classList.contains("regenerate-api-btn")&&(document.getElementById("exampleModalLabel").innerHTML="Regenerate API",document.getElementById("api-key-modal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").style.display="none",document.getElementById("createApi-btn").style.display="none",document.getElementById("edit-btn").style.display="block")});var o=document.getElementById("apikeyId"),l=document.getElementById("api-key-name"),d=document.getElementById("api-key"),b=document.getElementById("add-btn"),I=document.getElementById("edit-btn"),x=document.getElementsByClassName("remove-item-btn"),B=document.getElementsByClassName("edit-item-btn");u();f();document.getElementById("api-key-modal").addEventListener("hidden.bs.modal",function(){h()});document.querySelector("#apiKeyList").addEventListener("click",function(){f()});function v(){var e=new Date().getTime();window.performance&&typeof window.performance.now=="function"&&(e+=performance.now());var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var a=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(n=="x"?a:a&3|8).toString(16)});return t}document.querySelectorAll(".create-btn").forEach(function(e){e.addEventListener("click",function(){document.getElementById("api-key").value=v()})});var s=new Date,L=s.toUTCString().slice(5,16);s.setMonth(s.getMonth()+6);var S=s.toUTCString().slice(5,16),p=13;document.getElementById("createApi-btn").addEventListener("click",function(e){var t;if(l.value.length==0){var n=document.getElementById("api-key-error-msg");return n.classList.remove("d-none"),setTimeout(()=>document.getElementById("api-key-error-msg").classList.add("d-none"),2e3),t="Please enter api key name",n.innerHTML=t,!1}l.value.length>0&&(document.getElementById("apikey-element").style.display="block",e.target.style.display="none",document.getElementById("add-btn").style.display="block")});b.addEventListener("click",function(e){var t=document.getElementById("api-key-error-msg");t.classList.remove("d-none"),setTimeout(()=>document.getElementById("api-key-error-msg").classList.add("d-none"),2e3);var n;if(l.value.length==0)return n="Please enter api key name",t.innerHTML=n,!1;l.value!==""&&d.value!==""&&(i.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ'+p+"</a>",name:l.value,createBy:document.querySelector("#page-header-user-dropdown .user-name-text").innerHTML,apikey:'<input type="text" class="form-control apikey-value" readonly value="'+d.value+'">',status:g("Active"),create_date:L,expiry_date:S}),i.sort("id",{order:"desc"}),document.getElementById("close-modal").click(),h(),u(),p++,Swal.fire({position:"center",icon:"success",title:"Application inserted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0}))});I.addEventListener("click",function(e){document.getElementById("exampleModalLabel").innerHTML="Rename API name";var t=i.get({id:o.value});Array.from(t).forEach(function(n){isid=new DOMParser().parseFromString(n._values.id,"text/html");var a=isid.body.firstElementChild.innerHTML;a==itemId&&n.values({id:'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ'+o.value+"</a>",name:l.value,createBy:n._values.createBy,apikey:'<input type="text" class="form-control apikey-value" readonly value="'+d.value+'">',status:n._values.status,create_date:n._values.create_date,expiry_date:n._values.expiry_date}),document.getElementById("close-modal").click()}),Swal.fire({position:"center",icon:"success",title:"API name updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})});function f(){Array.from(document.getElementsByName("chk_child")).forEach(function(e){e.addEventListener("change",function(t){e.checked==!0?t.target.closest("tr").classList.add("table-active"):t.target.closest("tr").classList.remove("table-active");var n=document.querySelectorAll('[name="chk_child"]:checked').length;t.target.closest("tr").classList.contains("table-active"),n>0?document.getElementById("remove-actions").style.display="block":document.getElementById("remove-actions").style.display="none"})})}function u(){Array.from(B).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var n=i.get({id:itemId});Array.from(n).forEach(function(a){isid=new DOMParser().parseFromString(a._values.id,"text/html");var r=isid.body.firstElementChild.innerHTML;r==itemId&&(document.getElementById("apikey-element").style.display="block",o.value=r,l.value=a._values.name,d.value=new DOMParser().parseFromString(a._values.apikey,"text/html").body.querySelector(".apikey-value").value)})})}),Array.from(document.querySelectorAll(".regenerate-api-btn")).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var n=i.get({id:itemId});Array.from(n).forEach(function(a){isid=new DOMParser().parseFromString(a._values.id,"text/html");var r=isid.body.firstElementChild.innerHTML;r==itemId&&(document.getElementById("apikey-element").style.display="block",o.value=r,l.value=a._values.name,d.value=v())})})}),Array.from(x).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var n=i.get({id:itemId});Array.from(n).forEach(function(a){deleteid=new DOMParser().parseFromString(a._values.id,"text/html");var r=deleteid.body.firstElementChild,k=deleteid.body.firstElementChild.innerHTML;k==itemId&&document.getElementById("delete-record").addEventListener("click",function(){i.remove("id",r.outerHTML),document.getElementById("deleteRecord-close").click()})})})})}function h(){l.value="",d.value="",document.getElementById("apikey-element").style.display="none",document.getElementById("add-btn").style.display="none"}document.querySelector(".pagination-next").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click()});document.querySelector(".pagination-prev").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click()});
