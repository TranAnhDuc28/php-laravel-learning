var w=document.getElementById("checkAll");w&&(w.onclick=function(){for(var t=document.querySelectorAll('.form-check-all input[type="checkbox"]'),e=document.querySelectorAll('.form-check-all input[type="checkbox"]:checked').length,l=0;l<t.length;l++)t[l].checked=this.checked,t[l].checked?t[l].closest("tr").classList.add("table-active"):t[l].closest("tr").classList.remove("table-active");e>0?document.getElementById("remove-actions").style.display="none":document.getElementById("remove-actions").style.display="block"});var k=8,f=!1,C={valueNames:["id","name","owner","industry_type","star_value","location","employee","website","contact_email","since",{attr:"src",name:"image_src"}],page:k,pagination:!0,plugins:[ListPagination({left:2,right:2})]},i=new List("companyList",C).on("updated",function(t){t.matchingItems.length==0?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var e=t.i==1,l=t.i>t.matchingItems.length-t.page;document.querySelector(".pagination-prev.disabled")&&document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),e&&document.querySelector(".pagination-prev").classList.add("disabled"),l&&document.querySelector(".pagination-next").classList.add("disabled"),t.matchingItems.length<=k?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",t.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"});const E=new XMLHttpRequest;E.onload=function(){var t=JSON.parse(this.responseText);Array.from(t).forEach(function(e){i.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ'+e.id+"</a>",name:e.name,owner:e.owner,desc:e.desc,industry_type:e.industry_type,star_value:e.star_value,location:e.location,employee:e.employee,website:e.website,contact_email:e.contact_email,since:e.since,image_src:e.image_src}),i.sort("id",{order:"desc"}),_()}),i.remove("id",'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ001</a>')};E.open("GET","build/json/company-list.json");E.send();isCount=new DOMParser().parseFromString(i.items.slice(-1)[0]._values.id,"text/html");document.querySelector("#company-logo-input").addEventListener("change",function(){var t=document.querySelector("#companylogo-img"),e=document.querySelector("#company-logo-input").files[0],l=new FileReader;l.addEventListener("load",function(){t.src=l.result},!1),e&&l.readAsDataURL(e)});isCount.body.firstElementChild.innerHTML;var h=document.getElementById("id-field"),s=document.getElementById("companyname-field"),p=document.getElementById("companylogo-img"),o=document.getElementById("owner-field"),d=document.getElementById("industry_type-field"),c=document.getElementById("star_value-field"),r=document.getElementById("location-field"),m=document.getElementById("employee-field"),u=document.getElementById("website-field"),v=document.getElementById("contact_email-field"),y=document.getElementById("since-field");document.getElementById("add-btn");document.getElementById("edit-btn");var B=document.getElementsByClassName("remove-item-btn"),I=document.getElementsByClassName("edit-item-btn");viewBtns=document.getElementsByClassName("view-item-btn");_();document.getElementById("showModal").addEventListener("show.bs.modal",function(t){t.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit Company",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Update"):t.relatedTarget.classList.contains("add-btn")?(document.getElementById("exampleModalLabel").innerHTML="Add Company",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Add Company"):(document.getElementById("exampleModalLabel").innerHTML="List Company",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")});q();document.getElementById("showModal").addEventListener("hidden.bs.modal",function(){b()});document.querySelector("#companyList").addEventListener("click",function(){q()});var S=document.getElementById("customerTable");S.getElementsByTagName("tr");S.querySelectorAll(".list tr");var L=11,M=document.querySelectorAll(".tablelist-form");Array.prototype.slice.call(M).forEach(function(t){t.addEventListener("submit",function(e){if(!t.checkValidity())e.preventDefault(),e.stopPropagation();else if(e.preventDefault(),s.value!==""&&o.value!==""&&d.value!==""&&c.value!==""&&r.value!==""&&m.value!==""&&u.value!==""&&v.value!==""&&y.value!==""&&!f)i.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ'+L+"</a>",image_src:p.src,name:s.value,owner:o.value,industry_type:d.value,star_value:c.value,location:r.value,employee:m.value,website:u.value,contact_email:v.value,since:y.value}),i.sort("id",{order:"desc"}),document.getElementById("close-modal").click(),b(),_(),L++,Swal.fire({position:"center",icon:"success",title:"Company inserted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0});else if(s.value!==""&&o.value!==""&&d.value!==""&&c.value!==""&&r.value!==""&&m.value!==""&&u.value!==""&&v.value!==""&&y.value!==""&&f){var l=i.get({id:h.value});Array.from(l).forEach(function(a){isid=new DOMParser().parseFromString(a._values.id,"text/html");var n=isid.body.firstElementChild.innerHTML;n==itemId&&a.values({id:`<a href="javascript:void(0);" class="fw-medium link-primary">${h.value}</a>`,image_src:p.src,name:s.value,owner:o.value,industry_type:d.value,star_value:c.value,location:r.value,employee:m.value,website:u.value,contact_email:v.value,since:y.value})}),document.getElementById("close-modal").click(),b(),Swal.fire({position:"center",icon:"success",title:"Company updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}},!1)});function q(){Array.from(document.getElementsByName("chk_child")).forEach(function(t){t.addEventListener("change",function(e){t.checked==!0?e.target.closest("tr").classList.add("table-active"):e.target.closest("tr").classList.remove("table-active");var l=document.querySelectorAll('[name="chk_child"]:checked').length;e.target.closest("tr").classList.contains("table-active"),l>0?document.getElementById("remove-actions").style.display="block":document.getElementById("remove-actions").style.display="none"})})}function _(){B&&Array.from(B).forEach(function(t){t.addEventListener("click",function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var l=i.get({id:itemId});Array.from(l).forEach(function(a){deleteid=new DOMParser().parseFromString(a._values.id,"text/html");var n=deleteid.body.firstElementChild,g=deleteid.body.firstElementChild.innerHTML;g==itemId&&document.getElementById("delete-record").addEventListener("click",function(){i.remove("id",n.outerHTML),document.getElementById("deleteRecord-close").click()})})})}),I&&Array.from(I).forEach(function(t){t.addEventListener("click",function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var l=i.get({id:itemId});Array.from(l).forEach(function(a){isid=new DOMParser().parseFromString(a._values.id,"text/html");var n=isid.body.firstElementChild.innerHTML;n==itemId&&(f=!0,h.value=n,p.src=a._values.image_src,s.value=a._values.name,o.value=a._values.owner,d.value=a._values.industry_type,c.value=a._values.star_value,r.value=a._values.location,m.value=a._values.employee,u.value=a._values.website,v.value=a._values.contact_email,y.value=a._values.since)})})}),Array.from(viewBtns).forEach(function(t){t.addEventListener("click",function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var l=i.get({id:itemId});Array.from(l).forEach(function(a){isid=new DOMParser().parseFromString(a._values.id,"text/html");var n=isid.body.firstElementChild.innerHTML;if(n==itemId){var g=`
                        <div class="card-body text-center">
                            <div class="position-relative d-inline-block">
                                <div class="avatar-md">
                                    <div class="avatar-title bg-light rounded-circle">
                                        <img src="${a._values.image_src}" alt="" class="avatar-sm rounded-circle object-fit-cover">
                                    </div>
                                </div>
                            </div>
                            <h5 class="mt-3 mb-1">${a._values.name}</h5>
                            <p class="text-muted">${a._values.owner}</p>

                            <ul class="list-inline mb-0">
                                <li class="list-inline-item avatar-xs">
                                    <a href="javascript:void(0);"
                                        class="avatar-title bg-success-subtle text-success fs-15 rounded">
                                        <i class="ri-global-line"></i>
                                    </a>
                                </li>
                                <li class="list-inline-item avatar-xs">
                                    <a href="javascript:void(0);"
                                        class="avatar-title bg-danger-subtle text-danger fs-15 rounded">
                                        <i class="ri-mail-line"></i>
                                    </a>
                                </li>
                                <li class="list-inline-item avatar-xs">
                                    <a href="javascript:void(0);"
                                        class="avatar-title bg-warning-subtle text-warning fs-15 rounded">
                                        <i class="ri-question-answer-line"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <h6 class="text-muted text-uppercase fw-semibold mb-3">Information</h6>
                            <p class="text-muted mb-4">${a._values.desc}</p>
                            <div class="table-responsive table-card">
                                <table class="table table-borderless mb-0">
                                    <tbody>
                                        <tr>
                                            <td class="fw-medium" scope="row">Industry Type</td>
                                            <td>${a._values.industry_type}</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Location</td>
                                            <td>${a._values.location}</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Employee</td>
                                            <td>${a._values.employee}</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Rating</td>
                                            <td>${a._values.star_value} <i class="ri-star-fill text-warning align-bottom"></i></td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Website</td>
                                            <td>
                                                <a href="javascript:void(0);"
                                                    class="link-primary text-decoration-underline">${a._values.website}</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Contact Email</td>
                                            <td>${a._values.contact_email}</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Since</td>
                                            <td>${a._values.since}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    `;document.getElementById("company-view-detail").innerHTML=g}})})})}function b(){p.src="build/images/users/multi-user.jpg",s.value="",o.value="",d.value="",c.value="",r.value="",m.value="",u.value="",v.value="",y.value=""}document.querySelector(".pagination-next").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click()});document.querySelector(".pagination-prev").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click()});
