var E="build/json/",o="";document.querySelector("#elmLoader");var S=function(t,e){var c=new XMLHttpRequest;c.open("GET",E+t,!0),c.responseType="json",c.onload=function(){var l=c.status;l===200?(document.getElementById("elmLoader").innerHTML="",e(null,c.response)):e(l,c.response)},c.send()};function u(t){var e=document.querySelector('#mail-filter-navlist button[data-bs-target="#pills-primary"]');e.click(),document.querySelector("#mail-list").innerHTML="",Array.from(t).forEach(function(c,l){var a=c.readed?"":"unread",n=c.starred?"active":"",r=c.counted?"("+c.counted+")":"";document.querySelector("#mail-list").innerHTML+='<li class="'+a+'">        <div class="col-mail col-mail-1">            <div class="form-check checkbox-wrapper-mail fs-14">                <input class="form-check-input" type="checkbox" value="'+c.id+'" id="checkbox-'+c.id+'">                <label class="form-check-label" for="checkbox-'+c.id+'"></label>            </div>            <input type="hidden" value='+c.userImg+' class="mail-userimg" />            <button type="button" class="btn avatar-xs p-0 favourite-btn fs-15 '+n+'">            <i class="ri-star-fill"></i>            </button>            <a href="javascript: void(0);" class="title"><span class="title-name">'+c.name+"</span> "+r+'</a>        </div>        <div class="col-mail col-mail-2">            <a href="javascript: void(0);" class="subject"><span class="subject-title">'+c.title+'</span> – <span class="teaser">'+c.description+'</span>            </a>            <div class="date">'+c.date+"</div>        </div>    </li>",d(),m(),v(),f()})}function L(t){Array.from(t).forEach(function(e,c){var l=e.readed?"":"unread",a=e.starred?"active":"",n=e.counted?"("+e.counted+")":"";document.getElementById("social-mail-list").innerHTML+='<li class="'+l+'">                <div class="col-mail col-mail-1">                    <div class="form-check checkbox-wrapper-mail fs-14">                        <input class="form-check-input" type="checkbox" value="'+e.id+'" id="checkbox-'+e.id+'">                        <label class="form-check-label" for="checkbox-'+e.id+'"></label>                    </div>                    <input type="hidden" value='+e.userImg+' class="mail-userimg" />                    <button type="button" class="btn avatar-xs p-0 favourite-btn fs-15 '+a+'">                    <i class="ri-star-fill"></i>                    </button>                    <a href="javascript: void(0);" class="title"><span class="title-name">'+e.name+"</span> "+n+'</a>                </div>                <div class="col-mail col-mail-2">                    <a href="javascript: void(0);" class="subject"><span class="subject-title">'+e.title+'</span> – <span class="teaser">'+e.description+'</span>                    </a>                    <div class="date">'+e.date+"</div>                </div>            </li>",m(),v(),f()})}function A(t){Array.from(t).forEach(function(e,c){var l=e.readed?"":"unread",a=e.starred?"active":"",n=e.counted?"("+e.counted+")":"";document.getElementById("promotions-mail-list").innerHTML+='<li class="'+l+'">                <div class="col-mail col-mail-1">                    <div class="form-check checkbox-wrapper-mail fs-14">                        <input class="form-check-input" type="checkbox" value="'+e.id+'" id="checkbox-'+e.id+'">                        <label class="form-check-label" for="checkbox-'+e.id+'"></label>                    </div>                    <input type="hidden" value='+e.userImg+' class="mail-userimg" />                    <button type="button" class="btn avatar-xs p-0 favourite-btn fs-15 '+a+'">                    <i class="ri-star-fill"></i>                    </button>                    <a href="javascript: void(0);" class="title"><span class="title-name">'+e.name+"</span> "+n+'</a>                </div>                <div class="col-mail col-mail-2">                    <a href="javascript: void(0);" class="subject"><span class="subject-title">'+e.title+'</span> – <span class="teaser">'+e.description+'</span>                    </a>                    <div class="date">'+e.date+"</div>                </div>            </li>",m(),v(),f()})}S("mail-list.init.json",function(t,e){t!==null?console.log("Something went wrong: "+t):(o=e[0].primary,socialmaillist=e[0].social,promotionsmaillist=e[0].promotions,u(o),L(socialmaillist),A(promotionsmaillist))});Array.from(document.querySelectorAll(".mail-list a")).forEach(function(t){t.addEventListener("click",function(){var e=document.querySelector(".mail-list a.active");if(e&&e.classList.remove("active"),t.classList.add("active"),t.querySelector(".mail-list-link").hasAttribute("data-type"))var c=t.querySelector(".mail-list-link").innerHTML,l=o.filter(a=>a.labeltype===c);else{var c=t.querySelector(".mail-list-link").innerHTML;if(document.getElementById("mail-list").innerHTML="",c!="All")var l=o.filter(r=>r.tabtype===c);else var l=o;c!="All"&&c!="Inbox"?document.getElementById("mail-filter-navlist").style.display="none":document.getElementById("mail-filter-navlist").style.display="block"}u(l),d()})});function d(){Array.from(document.querySelectorAll(".favourite-btn")).forEach(function(t){t.addEventListener("click",function(){t.classList.contains("active")?t.classList.remove("active"):t.classList.add("active")})})}d();function m(){var t=document.getElementsByTagName("body")[0];Array.from(document.querySelectorAll(".message-list a")).forEach(function(l){l.addEventListener("click",function(a){t.classList.add("email-detail-show"),Array.from(document.querySelectorAll(".message-list li.unread")).forEach(function(n){n.classList.contains("unread")&&a.target.closest("li").classList.remove("unread")})})}),Array.from(document.querySelectorAll(".close-btn-email")).forEach(function(l){l.addEventListener("click",function(){t.classList.remove("email-detail-show")})});var e=!1,c=document.getElementsByClassName("email-menu-sidebar");Array.from(document.querySelectorAll(".email-menu-btn")).forEach(function(l){l.addEventListener("click",function(){Array.from(c).forEach(function(a){a.classList.add("menubar-show"),e=!0})})}),window.addEventListener("click",function(l){document.querySelector(".email-menu-sidebar").classList.contains("menubar-show")&&(e||document.querySelector(".email-menu-sidebar").classList.remove("menubar-show"),e=!1)}),d()}ClassicEditor.create(document.querySelector("#email-editor")).then(function(t){t.ui.view.editable.element.style.height="200px"}).catch(function(t){console.error(t)});function f(){Array.from(document.querySelectorAll(".checkbox-wrapper-mail input")).forEach(function(a){a.addEventListener("click",function(n){n.target.checked==!0?n.target.closest("li").classList.add("active"):n.target.closest("li").classList.remove("active")})});var t=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input");Array.from(t).forEach(function(a){a.addEventListener("click",function(n){var r=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input"),s=document.getElementById("checkall"),i=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input:checked").length;s.checked=i>0,s.indeterminate=i>0&&i<r.length,n.target.closest("li").classList.contains("active"),i>0?document.getElementById("email-topbar-actions").style.display="block":document.getElementById("email-topbar-actions").style.display="none"})});function e(){var a=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input"),n=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input:checked").length;Array.from(a).forEach(function(r){r.checked=!0,r.parentNode.parentNode.parentNode.classList.add("active")}),n>0?document.getElementById("email-topbar-actions").style.display="none":document.getElementById("email-topbar-actions").style.display="block",n>0?Array.from(a).forEach(function(r){r.checked=!1,r.parentNode.parentNode.parentNode.classList.remove("active")}):Array.from(a).forEach(function(r){r.checked=!0,r.parentNode.parentNode.parentNode.classList.add("active")}),this.onclick=c,h()}function c(){var a=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input"),n=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input:checked").length;Array.from(a).forEach(function(r){r.checked=!1,r.parentNode.parentNode.parentNode.classList.remove("active")}),n>0?document.getElementById("email-topbar-actions").style.display="none":document.getElementById("email-topbar-actions").style.display="block",n>0?Array.from(a).forEach(function(r){r.checked=!1,r.parentNode.parentNode.parentNode.classList.remove("active")}):Array.from(a).forEach(function(r){r.checked=!0,r.parentNode.parentNode.parentNode.classList.add("active")}),this.onclick=e}var l=document.getElementById("checkall");l.onclick=e}p();function p(t){setTimeout(()=>{var e=new SimpleBar(document.getElementById("chat-conversation"));e.getScrollElement().scrollTop=document.getElementById("users-conversation").scrollHeight},100)}function h(){var t=document.getElementById("removeItemModal");t.addEventListener("show.bs.modal",function(e){document.getElementById("delete-record").addEventListener("click",function(){Array.from(document.querySelectorAll(".message-list li")).forEach(function(c){var l="";if(c.classList.contains("active")){let r=function(i,g){return i.filter(function(k){return k.id!=g})};var n=r,a=c.querySelector(".form-check-input").value,l=r(o,a);o=l,c.remove()}}),document.getElementById("btn-close").click(),document.getElementById("email-topbar-actions")&&(document.getElementById("email-topbar-actions").style.display="none"),checkall.indeterminate=!1,checkall.checked=!1})})}h();function q(){var t=0;document.querySelectorAll(".remove-mail").forEach(function(e){e.addEventListener("click",function(c){t=e.getAttribute("data-remove-id"),document.getElementById("delete-record").addEventListener("click",function(){var l="";function a(n,r){return n.filter(function(s){return s.id!=r})}l=a(o,t),o=l,u(o),document.getElementById("close-btn-email").click()})})})}q();var I=document.getElementById("mark-all-read");I.addEventListener("click",function(t){if(document.querySelectorAll(".message-list li.unread").length===0){let c=function(){document.getElementById("unreadConversations").style.display="none"};var e=c;document.getElementById("unreadConversations").style.display="block",setTimeout(c,1e3)}Array.from(document.querySelectorAll(".message-list li.unread")).forEach(function(c){c.classList.contains("unread")&&c.classList.remove("unread")})});var y="build/images/users/user-dummy-img.jpg";document.querySelectorAll(".email-chat-list a").forEach(function(t){if(t.classList.contains("active")){document.getElementById("emailchat-detailElem").style.display="block";var e=document.querySelector(".email-chat-list a.active").querySelector(".chatlist-user-name").innerHTML,c=document.querySelector(".email-chat-list a.active").querySelector(".chatlist-user-image img").getAttribute("src");document.querySelector(".email-chat-detail .profile-username").innerHTML=e,document.getElementById("users-conversation").querySelectorAll(".left .chat-avatar").forEach(function(l){c?l.querySelector("img").setAttribute("src",c):l.querySelector("img").setAttribute("src",y)})}t.addEventListener("click",function(l){document.getElementById("emailchat-detailElem").style.display="block";var a=document.querySelector(".email-chat-list a.active");a&&a.classList.remove("active"),this.classList.add("active"),p();var n=t.querySelector(".chatlist-user-name").innerHTML,r=t.querySelector(".chatlist-user-image img").getAttribute("src");document.querySelector(".email-chat-detail .profile-username").innerHTML=n;var s=document.getElementById("users-conversation");Array.from(s.querySelectorAll(".left .chat-avatar")).forEach(function(i){r?i.querySelector("img").setAttribute("src",r):i.querySelector("img").setAttribute("src",y)})})});document.getElementById("emailchat-btn-close").addEventListener("click",function(){document.getElementById("emailchat-detailElem").style.display="none",document.querySelector(".email-chat-list a.active").classList.remove("active")});function v(){Array.from(document.querySelectorAll(".message-list li")).forEach(function(t){t.addEventListener("click",function(){var e=t.querySelector(".checkbox-wrapper-mail .form-check-input").value;document.querySelector(".remove-mail").setAttribute("data-remove-id",e);var c=t.querySelector(".subject-title").innerHTML;document.querySelector(".email-subject-title").innerHTML=c;var l=t.querySelector(".title-name").innerHTML;Array.from(document.querySelectorAll(".accordion-item.left")).forEach(function(r){r.querySelector(".email-user-name").innerHTML=l;var s=t.querySelector(".mail-userimg").value;r.querySelector("img").setAttribute("src",s)});var a=document.querySelector(".user-name-text").innerHTML,n=document.querySelector(".header-profile-user").getAttribute("src");Array.from(document.querySelectorAll(".accordion-item.right")).forEach(function(r){r.querySelector(".email-user-name-right").innerHTML=a,r.querySelector("img").setAttribute("src",n)})})})}const B=document.querySelectorAll("#mail-filter-navlist .nav-tabs button");B.forEach(t=>{const e=new bootstrap.Tab(t);t.addEventListener("click",c=>{c.preventDefault(),document.querySelector(".tab-content .tab-pane.show"),e.show()})});function b(){var t=document.documentElement.clientWidth;if(t<767){var e=document.querySelector(".email-chat-list a.active");e&&e.classList.remove("active"),document.getElementById("emailchat-detailElem").style.display="none"}}b();window.onresize=b;
