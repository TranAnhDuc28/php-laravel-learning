var W=document.getElementById("event-start-date"),V=document.getElementById("timepicker1"),j=document.getElementById("timepicker2");document.addEventListener("DOMContentLoaded",function(){F();var i=new bootstrap.Modal(document.getElementById("event-modal"),{keyboard:!1});document.getElementById("event-modal");var d=document.getElementById("modal-title"),l=document.getElementById("form-event"),e=null,o=document.getElementsByClassName("needs-validation"),v=new Date,c=v.getDate(),r=v.getMonth(),s=v.getFullYear(),M=FullCalendar.Draggable,A=document.getElementById("external-events"),t=[{id:1,title:"World Braille Day",start:"2022-01-04",className:"bg-info-subtle",allDay:!0},{id:2,title:"World Leprosy Day",start:"2022-01-30",className:"bg-info-subtle",allDay:!0},{id:3,title:"International Mother Language Day",start:"2022-02-21",className:"bg-info-subtle",allDay:!0},{id:4,title:"International Women's Day",start:"2022-03-08",className:"bg-info-subtle",allDay:!0},{id:5,title:"World Thinking Day",start:"2022-02-22",className:"bg-info-subtle",allDay:!0},{id:6,title:"International Mother Language Day",start:"2022-03-21",className:"bg-info-subtle",allDay:!0},{id:7,title:"World Water Day",start:"2022-03-22",className:"bg-info-subtle",allDay:!0},{id:8,title:"World Health Day",start:"2022-04-07",className:"bg-info-subtle",allDay:!0},{id:9,title:"International Special Librarians Day",start:"2022-04-16",className:"bg-info-subtle",allDay:!0},{id:10,title:"Earth Day",start:"2022-04-22",className:"bg-info-subtle",allDay:!0},{id:153,title:"All Day Event",start:new Date(s,r,1),className:"bg-primary-subtle",location:"San Francisco, US",allDay:!0,extendedProps:{department:"All Day Event"},description:"An all-day event is an event that lasts an entire day or longer"},{id:136,title:"Visit Online Course",start:new Date(s,r,c-5),end:new Date(s,r,c-2),allDay:!0,className:"bg-warning-subtle",extendedProps:{department:"Long Event"},description:"Long Term Event means an incident that last longer than 12 hours."},{id:999,title:"Client Meeting with Alexis",start:new Date(s,r,c+22,20,0),end:new Date(s,r,c+24,16,0),allDay:!0,className:"bg-danger-subtle",location:"California, US",extendedProps:{department:"Meeting with Alexis"},description:"A meeting is a gathering of two or more people that has been convened for the purpose of achieving a common goal through verbal interaction, such as sharing information or reaching agreement."},{id:991,title:"Repeating Event",start:new Date(s,r,c+4,16,0),end:new Date(s,r,c+9,16,0),allDay:!0,className:"bg-primary-subtle",location:"Las Vegas, US",extendedProps:{department:"Repeating Event"},description:"A recurring or repeating event is simply any event that you will occur more than once on your calendar. "},{id:112,title:"Meeting With Designer",start:new Date(s,r,c,12,30),allDay:!0,className:"bg-success-subtle",location:"Head Office, US",extendedProps:{department:"Meeting"},description:"Tell how to boost website traffic"},{id:113,title:"Weekly Strategy Planning",start:new Date(s,r,c+9),end:new Date(s,r,c+11),allDay:!0,className:"bg-danger-subtle",location:"Head Office, US",extendedProps:{department:"Lunch"},description:"Strategies for Creating Your Weekly Schedule"},{id:875,title:"Birthday Party",start:new Date(s,r,c+1,19,0),allDay:!0,className:"bg-success-subtle",location:"Los Angeles, US",extendedProps:{department:"Birthday Party"},description:"Family slumber party â€“ Bring out the blankets and pillows and have a family slumber party! Play silly party games, share special snacks and wind down the fun with a special movie."},{id:783,title:"Click for Google",start:new Date(s,r,28),end:new Date(s,r,29),allDay:!0,url:"http://google.com/",className:"bg-dark-subtle"},{id:456,title:"Velzon Project Discussion with Team",start:new Date(s,r,c+23,20,0),end:new Date(s,r,c+24,16,0),allDay:!0,className:"bg-info-subtle",location:"Head Office, US",extendedProps:{department:"Discussion"},description:"Tell how to boost website traffic"}];new M(A,{itemSelector:".external-event",eventData:function(n){return{id:Math.floor(Math.random()*11e3),title:n.innerText,allDay:!0,start:new Date,className:n.getAttribute("data-class")}}});var g=document.getElementById("calendar");function I(n){document.getElementById("form-event").reset(),document.getElementById("btn-delete-event").setAttribute("hidden",!0),i.show(),l.classList.remove("was-validated"),l.reset(),e=null,d.innerText="Add Event",newEventData=n,document.getElementById("edit-event-btn").setAttribute("data-id","new-event"),document.getElementById("edit-event-btn").click(),document.getElementById("edit-event-btn").setAttribute("hidden",!0)}var C=new Choices("#event-category",{searchEnabled:!1}),T=new FullCalendar.Calendar(g,{timeZone:"local",editable:!0,droppable:!0,selectable:!0,navLinks:!0,initialView:"multiMonthYear",themeSystem:"bootstrap",headerToolbar:{left:"prev,next today",center:"title",right:"multiMonthYear,dayGridMonth,timeGridWeek,timeGridDay,listMonth"},eventResize:function(n){var a=t.findIndex(function(m){return m.id==n.event.id});t[a]&&(t[a].title=n.event.title,t[a].start=n.event.start,t[a].end=n.event.end?n.event.end:null,t[a].allDay=n.event.allDay,t[a].className=n.event.classNames[0],t[a].description=n.event._def.extendedProps.description?n.event._def.extendedProps.description:"",t[a].location=n.event._def.extendedProps.location?n.event._def.extendedProps.location:""),L(t)},eventClick:function(n){document.getElementById("edit-event-btn").removeAttribute("hidden"),document.getElementById("btn-save-event").setAttribute("hidden",!0),document.getElementById("edit-event-btn").setAttribute("data-id","edit-event"),document.getElementById("edit-event-btn").innerHTML="Edit",R(),F(),Y(),i.show(),l.reset(),e=n.event,document.getElementById("modal-title").innerHTML="",document.getElementById("event-location-tag").innerHTML=e.extendedProps.location===void 0?"No Location":e.extendedProps.location,document.getElementById("event-description-tag").innerHTML=e.extendedProps.description===void 0?"No Description":e.extendedProps.description,document.getElementById("event-title").value=e.title,document.getElementById("event-location").value=e.extendedProps.location===void 0?"No Location":e.extendedProps.location,document.getElementById("event-description").value=e.extendedProps.description===void 0?"No Description":e.extendedProps.description,document.getElementById("eventid").value=e.id,e.classNames[0]&&(C.destroy(),C=new Choices("#event-category",{searchEnabled:!1}),C.setChoiceByValue(e.classNames[0]));var a=e.start,m=e.end,u=function(y){var w=new Date(y),p=""+(w.getMonth()+1),b=""+w.getDate(),S=w.getFullYear();return p.length<2&&(p="0"+p),b.length<2&&(b="0"+b),[S,p,b].join("-")},B=null;if(m!=null){var k=new Date(m);B=k.setDate(k.getDate()-1)}var x=m==null?N(a):N(a)+" to "+N(B),f=m==null?u(a):u(a)+" to "+u(B);flatpickr(W,{defaultDate:f,altInput:!0,altFormat:"j F Y",dateFormat:"Y-m-d",mode:"range",onChange:function(H,y,w){var p=y,b=p.split("to");b.length>1?document.getElementById("event-time").setAttribute("hidden",!0):(document.getElementById("timepicker1").parentNode.classList.remove("d-none"),document.getElementById("timepicker1").classList.replace("d-none","d-block"),document.getElementById("timepicker2").parentNode.classList.remove("d-none"),document.getElementById("timepicker2").classList.replace("d-none","d-block"),document.getElementById("event-time").removeAttribute("hidden"))}}),document.getElementById("event-start-date-tag").innerHTML=x;var E=_(e.start),h=_(e.end);E==h?(document.getElementById("event-time").setAttribute("hidden",!0),flatpickr(document.getElementById("timepicker1"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}),flatpickr(document.getElementById("timepicker2"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i"})):(document.getElementById("event-time").removeAttribute("hidden"),flatpickr(document.getElementById("timepicker1"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:E}),flatpickr(document.getElementById("timepicker2"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:h}),document.getElementById("event-timepicker1-tag").innerHTML=P(E),document.getElementById("event-timepicker2-tag").innerHTML=P(h)),newEventData=null,d.innerText=e.title,document.getElementById("btn-delete-event").removeAttribute("hidden"),document.querySelector(".fc-multiMonthYear-button").classList.contains("fc-button-active")&&document.querySelector(".fc-popover").classList.add("d-none")},dateClick:function(n){I(n)},events:t,eventReceive:function(n){var a=parseInt(n.event.id),m={id:a,title:n.event.title,start:n.event.start,allDay:n.event.allDay,className:n.event.classNames[0]};t.push(m),L(t)},eventDrop:function(n){var a=t.findIndex(function(m){return m.id==n.event.id});t[a]&&(t[a].title=n.event.title,t[a].start=n.event.start,t[a].end=n.event.end?n.event.end:null,t[a].allDay=n.event.allDay,t[a].className=n.event.classNames[0],t[a].description=n.event._def.extendedProps.description?n.event._def.extendedProps.description:"",t[a].location=n.event._def.extendedProps.location?n.event._def.extendedProps.location:""),L(t)}});T.render(),L(t),l.addEventListener("submit",function(n){n.preventDefault();var a=document.getElementById("event-title").value,m=document.getElementById("event-category").value,u=document.getElementById("event-start-date").value.split("to"),B=new Date(u[0].trim()),k=new Date(u[1]);k.setDate(k.getDate()+1);var x=u[1]?k:"",f=null,E=document.getElementById("event-location").value,h=document.getElementById("event-description").value,H=document.getElementById("eventid").value,y=!1;if(u.length>1){var f=new Date(u[1]);f.setDate(f.getDate()+1),u=new Date(u[0]),y=!0}else{var w=u,p=document.getElementById("timepicker1").value.trim(),b=document.getElementById("timepicker2").value.trim();u=new Date(u+"T"+p),f=new Date(w+"T"+b)}var S=t.length+1;if(o[0].checkValidity()===!1)o[0].classList.add("was-validated");else{if(e){e.setProp("id",H),e.setProp("title",a),e.setProp("classNames",[m]),e.setStart(B),e.setEnd(x),e.setAllDay(y),e.setExtendedProp("description",h),e.setExtendedProp("location",E);var D=t.findIndex(function(G){return G.id==e.id});t[D]&&(t[D].title=a,t[D].start=B,t[D].end=x,t[D].allDay=y,t[D].className=m,t[D].description=h,t[D].location=E),T.render()}else{var U={id:S,title:a,start:u,end:f,allDay:y,className:m,description:h,location:E};T.addEvent(U),t.push(U)}i.hide(),L(t)}}),document.getElementById("btn-delete-event").addEventListener("click",function(n){if(e){for(var a=0;a<t.length;a++)t[a].id==e.id&&(t.splice(a,1),a--);L(t),e.remove(),e=null,i.hide()}}),document.getElementById("btn-new-event").addEventListener("click",function(n){Y(),F(),I(),document.getElementById("edit-event-btn").setAttribute("data-id","new-event"),document.getElementById("edit-event-btn").click(),document.getElementById("edit-event-btn").setAttribute("hidden",!0)})});function F(){var i={enableTime:!0,noCalendar:!0};flatpickr(W,{enableTime:!1,mode:"range",minDate:"today",onChange:function(d,l,e){var o=l,v=o.split("to");v.length>1?document.getElementById("event-time").setAttribute("hidden",!0):(document.getElementById("timepicker1").parentNode.classList.remove("d-none"),document.getElementById("timepicker1").classList.replace("d-none","d-block"),document.getElementById("timepicker2").parentNode.classList.remove("d-none"),document.getElementById("timepicker2").classList.replace("d-none","d-block"),document.getElementById("event-time").removeAttribute("hidden"))}}),flatpickr(V,i),flatpickr(j,i)}function Y(){W.flatpickr().clear(),V.flatpickr().clear(),j.flatpickr().clear()}function R(){document.getElementById("form-event").classList.add("view-event"),document.getElementById("event-title").classList.replace("d-block","d-none"),document.getElementById("event-category").classList.replace("d-block","d-none"),document.getElementById("event-start-date").parentNode.classList.add("d-none"),document.getElementById("event-start-date").classList.replace("d-block","d-none"),document.getElementById("event-time").setAttribute("hidden",!0),document.getElementById("timepicker1").parentNode.classList.add("d-none"),document.getElementById("timepicker1").classList.replace("d-block","d-none"),document.getElementById("timepicker2").parentNode.classList.add("d-none"),document.getElementById("timepicker2").classList.replace("d-block","d-none"),document.getElementById("event-location").classList.replace("d-block","d-none"),document.getElementById("event-description").classList.replace("d-block","d-none"),document.getElementById("event-start-date-tag").classList.replace("d-none","d-block"),document.getElementById("event-timepicker1-tag").classList.replace("d-none","d-block"),document.getElementById("event-timepicker2-tag").classList.replace("d-none","d-block"),document.getElementById("event-location-tag").classList.replace("d-none","d-block"),document.getElementById("event-description-tag").classList.replace("d-none","d-block"),document.getElementById("btn-save-event").setAttribute("hidden",!0)}function L(i){i.sort(function(d,l){return new Date(d.start)-new Date(l.start)}),document.getElementById("upcoming-event-list").innerHTML=null,Array.from(i).forEach(function(d){var l=d.title;if(d.end){endUpdatedDay=new Date(d.end);var e=endUpdatedDay.setDate(endUpdatedDay.getDate()-1)}var o=e||void 0;if(o=="Invalid Date"||o==null)o=null;else{const I=new Date(o).toLocaleDateString("en",{year:"numeric",month:"numeric",day:"numeric"});o=new Date(I).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).split(" ").join(" ")}var v=d.start?N(d.start):null,c=e?N(e):null;v===c&&(o=null);var r=d.start;if(r==="Invalid Date"||r===void 0)r=null;else{const I=new Date(r).toLocaleDateString("en",{year:"numeric",month:"numeric",day:"numeric"});r=new Date(I).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).split(" ").join(" ")}var s=o?" to "+o:"",M=d.className.split("-"),A=d.description?d.description:"",t=P(_(d.start)),g=P(_(e));if(t==g)var t="Full day event",g=null;var g=g?" to "+g:"";u_event="<div class='card mb-3'>                        <div class='card-body'>                            <div class='d-flex mb-3'>                                <div class='flex-grow-1'><i class='mdi mdi-checkbox-blank-circle me-2 text-"+M[1]+"'></i><span class='fw-medium'>"+r+s+" </span></div>                                <div class='flex-shrink-0'><small class='badge bg-primary-subtle text-primary ms-auto'>"+t+g+"</small></div>                            </div>                            <h6 class='card-title fs-16'> "+l+"</h6>                            <p class='text-muted text-truncate-two-lines mb-0'> "+A+"</p>                        </div>                    </div>",document.getElementById("upcoming-event-list").innerHTML+=u_event})}function _(i){if(i=new Date(i),i.getHours()!=null){var d=i.getHours(),l=i.getMinutes()?i.getMinutes():0;return d+":"+l}}function P(i){var d=i.split(":"),l=d[0],e=d[1],o=l>=12?"PM":"AM";return l=l%12,l=l||12,e=e<10?"0"+e:e,l+":"+e+" "+o}var N=function(d){var l=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new Date(d),o=""+l[e.getMonth()],v=""+e.getDate(),c=e.getFullYear();return o.length<2&&(o="0"+o),v.length<2&&(v="0"+v),[v+" "+o,c].join(",")};
