var B=document.getElementById("checkAll");B&&(B.onclick=function(){for(var e=document.querySelectorAll('.form-check-all input[type="checkbox"]'),t=document.querySelectorAll('.form-check-all input[type="checkbox"]:checked').length,a=0;a<e.length;a++)e[a].checked=this.checked,e[a].checked?e[a].closest("tr").classList.add("table-active"):e[a].closest("tr").classList.remove("table-active");t>0?document.getElementById("remove-actions").style.display="none":document.getElementById("remove-actions").style.display="block"});var C=document.getElementById("idStatus");new Choices(C,{searchEnabled:!1});var M=document.getElementById("idType");new Choices(M,{searchEnabled:!1});var f=8,h=!1,T={valueNames:["id","company","designation","date","contacts","type","status"],page:f,pagination:!0,plugins:[ListPagination({left:2,right:2})]},i=new List("applicationList",T).on("updated",function(e){e.matchingItems.length==0?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var t=e.i==1,a=e.i>e.matchingItems.length-e.page;document.querySelector(".pagination-prev.disabled")&&-document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),t&&document.querySelector(".pagination-prev").classList.add("disabled"),a&&document.querySelector(".pagination-next").classList.add("disabled"),e.matchingItems.length<=f?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",e.matchingItems.length==f&&document.querySelector(".pagination.listjs-pagination").firstElementChild.children[0].click(),e.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"});const S=new XMLHttpRequest;S.onload=function(){var e=JSON.parse(this.responseText);Array.from(e).forEach(function(t){i.add({id:'<a href="#" class="fw-medium link-primary">#VZ'+t.id+"</a>",company:'<div class="d-flex align-items-center">            <div class="flex-shrink-0">                <img src="'+t.company[0]+'" alt="" class="avatar-xxs rounded-circle image_src object-fit-cover">            </div>            <div class="flex-grow-1 ms-2 name">'+t.company[1]+"</div>        </div>",designation:t.designation,date:t.date,contacts:t.contacts,type:t.type,status:E(t.status)}),i.sort("id",{order:"desc"}),g()}),i.remove("id",'<a href="#" class="fw-medium link-primary">#VZ001</a>')};S.open("GET","build/json/application-list.json");S.send();function E(e){switch(e){case"Approved":return'<span class="badge bg-success-subtle text-success text-uppercase">'+e+"</span>";case"New":return'<span class="badge bg-info-subtle text-info text-uppercase">'+e+"</span>";case"Pending":return'<span class="badge bg-warning-subtle text-warning text-uppercase">'+e+"</span>";case"Rejected":return'<span class="badge bg-danger-subtle text-danger text-uppercase">'+e+"</span>"}}document.querySelector("#companylogo-image-input").addEventListener("change",function(){var e=document.querySelector("#companylogo-img"),t=document.querySelector("#companylogo-image-input").files[0],a=new FileReader;a.addEventListener("load",function(){e.src=a.result},!1),t&&a.readAsDataURL(t)});var b=document.getElementById("applicationId"),p=document.getElementById("companylogo-img"),d=document.getElementById("company-field"),u=document.getElementById("designation-field"),m=document.getElementById("date-field"),y=document.getElementById("contact-field"),s=document.getElementById("status-input"),c=document.getElementById("type-input");document.getElementById("add-btn");document.getElementById("edit-btn");var F=document.getElementsByClassName("remove-item-btn"),_=document.getElementsByClassName("edit-item-btn");g();var j=document.querySelectorAll('a[data-bs-toggle="tab"]');Array.from(j).forEach(function(e){e.addEventListener("shown.bs.tab",function(t){k(t.target.id)})});function k(e){var t=e;i.filter(function(a){var n=!1;matchData=new DOMParser().parseFromString(a.values().status,"text/html");var l=matchData.body.firstElementChild.innerHTML;return l=="All"||t=="All"?n=!0:n=l==t,n}),i.update()}var o=new Choices(c,{searchEnabled:!1}),r=new Choices(s,{searchEnabled:!1});document.getElementById("showModal").addEventListener("show.bs.modal",function(e){e.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit Application",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Update"):e.relatedTarget.classList.contains("add-btn")?(document.getElementById("exampleModalLabel").innerHTML="Add Application",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Add Application"):(document.getElementById("exampleModalLabel").innerHTML="List Application",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")});w();document.getElementById("showModal").addEventListener("hidden.bs.modal",function(){x()});document.querySelector("#applicationList").addEventListener("click",function(){g(),w()});var I=document.getElementById("jobListTable");I.getElementsByTagName("tr");I.querySelectorAll(".list tr");var L=13,D=document.querySelectorAll(".tablelist-form");Array.prototype.slice.call(D).forEach(function(e){e.addEventListener("submit",function(t){if(!e.checkValidity())t.preventDefault(),t.stopPropagation();else if(t.preventDefault(),d.value!==""&&u.value!==""&&m.value!==""&&y.value!==""&&s.value!==""&&c.value!==""&&!h)i.add({id:'<a href="#" class="fw-medium link-primary">#VZ'+L+"</a>",company:'<div class="d-flex align-items-center">                    <div class="flex-shrink-0">                        <img src="'+p.src+'" alt="" class="avatar-xxs rounded-circle image_src object-fit-cover">                    </div>                    <div class="flex-grow-1 ms-2 name">'+d.value+"</div>                </div>",designation:u.value,date:m.value,contacts:y.value,type:c.value,status:E(s.value)}),i.sort("id",{order:"desc"}),document.getElementById("close-modal").click(),x(),g(),k("All"),L++,Swal.fire({position:"center",icon:"success",title:"Application inserted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0});else if(d.value!==""&&u.value!==""&&m.value!==""&&y.value!==""&&s.value!==""&&c.value!==""&&h){var a=i.get({id:b.value});Array.from(a).forEach(function(n){isid=new DOMParser().parseFromString(n._values.id,"text/html");var l=isid.body.firstElementChild.innerHTML;l==itemId&&n.values({id:'<a href="javascript:void(0);" class="fw-medium link-primary">'+b.value+"</a>",company:'<div class="d-flex align-items-center">                            <div class="flex-shrink-0">                                <img src="'+p.src+'" alt="" class="avatar-xxs rounded-circle image_src object-fit-cover">                            </div>                            <div class="flex-grow-1 ms-2 name">'+d.value+"</div>                        </div>",designation:u.value,date:m.value,contacts:y.value,type:c.value,status:E(s.value)}),document.getElementById("close-modal").click()}),Swal.fire({position:"center",icon:"success",title:"Application updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}},!1)});function w(){Array.from(document.getElementsByName("checkAll")).forEach(function(e){e.addEventListener("change",function(t){e.checked==!0?t.target.closest("tr").classList.add("table-active"):t.target.closest("tr").classList.remove("table-active");var a=document.querySelectorAll('[name="checkAll"]:checked').length;t.target.closest("tr").classList.contains("table-active"),a>0?document.getElementById("remove-actions").style.display="block":document.getElementById("remove-actions").style.display="none"})})}function g(){Array.from(F).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var a=i.get({id:itemId});Array.from(a).forEach(function(n){deleteid=new DOMParser().parseFromString(n._values.id,"text/html");var l=deleteid.body.firstElementChild,v=deleteid.body.firstElementChild.innerHTML;v==itemId&&document.getElementById("delete-record").addEventListener("click",function(){i.remove("id",l.outerHTML),document.getElementById("deleteRecord-close").click()})})})}),Array.from(_).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var a=i.get({id:itemId});Array.from(a).forEach(function(n){isid=new DOMParser().parseFromString(n._values.id,"text/html");var l=isid.body.firstElementChild.innerHTML;if(l==itemId){h=!0,b.value=l;var v=new DOMParser().parseFromString(n._values.company,"text/html").body.querySelector(".name").innerHTML;d.value=v,p.src=new DOMParser().parseFromString(n._values.company,"text/html").body.querySelector(".image_src").src,u.value=n._values.designation,m.value=n._values.date,y.value=n._values.contacts,r&&r.destroy(),r=new Choices(s,{searchEnabled:!1}),val=new DOMParser().parseFromString(n._values.status,"text/html");var q=val.body.firstElementChild.innerHTML;r.setChoiceByValue(q),o&&o.destroy(),o=new Choices(c,{searchEnabled:!1});var A=n._values.type;o.setChoiceByValue(A),flatpickr("#date-field",{enableTime:!1,dateFormat:"d M, Y",defaultDate:n._values.date})}})})})}function x(){d.value="",p.src="",u.value="",m.value="",y.value="",o&&o.destroy(),o=new Choices(c),r&&r.destroy(),r=new Choices(s)}document.querySelector(".pagination-next").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click()});document.querySelector(".pagination-prev").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click()});
