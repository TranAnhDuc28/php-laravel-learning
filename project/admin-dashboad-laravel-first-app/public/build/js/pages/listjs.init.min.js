var f=document.getElementById("checkAll");f&&(f.onclick=function(){var e=document.querySelectorAll('.form-check-all input[type="checkbox"]');f.checked==!0?Array.from(e).forEach(function(t){t.checked=!0,t.closest("tr").classList.add("table-active")}):Array.from(e).forEach(function(t){t.checked=!1,t.closest("tr").classList.remove("table-active")})});var v=8,g=!1,q={valueNames:["id","customer_name","email","date","phone","status"],page:v,pagination:!0,plugins:[ListPagination({left:2,right:2})]};if(document.getElementById("customerList"))var n=new List("customerList",q).on("updated",function(e){e.matchingItems.length==0?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var t=e.i==1,i=e.i>e.matchingItems.length-e.page;document.querySelector(".pagination-prev.disabled")&&document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),t&&document.querySelector(".pagination-prev").classList.add("disabled"),i&&document.querySelector(".pagination-next").classList.add("disabled"),e.matchingItems.length<=v?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",e.matchingItems.length==v&&document.querySelector(".pagination.listjs-pagination").firstElementChild.children[0].click(),e.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"});const E=new XMLHttpRequest;E.onload=function(){var e=JSON.parse(this.responseText);Array.from(e).forEach(t=>{n.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ'+t.id+"</a>",customer_name:t.customer_name,email:t.email,date:t.date,phone:t.phone,status:p(t.status)}),n.sort("id",{order:"desc"}),b()}),n.remove("id",'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ2101</a>')};E.open("GET","build/json/table-customer-list.json");E.send();isCount=new DOMParser().parseFromString(n.items.slice(-1)[0]._values.id,"text/html");isCount.body.firstElementChild.innerHTML;var y=document.getElementById("id-field"),s=document.getElementById("customername-field"),r=document.getElementById("email-field"),o=document.getElementById("date-field"),d=document.getElementById("phone-field"),u=document.getElementById("status-field");document.getElementById("add-btn");document.getElementById("edit-btn");var L=document.getElementsByClassName("remove-item-btn"),S=document.getElementsByClassName("edit-item-btn");b();function C(e){n.filter(function(t){var i=!1;return matchData=new DOMParser().parseFromString(t.values().status,"text/html"),matchData.body.firstElementChild.innerHTML,i=!0,i}),n.update()}document.getElementById("showModal")&&(document.getElementById("showModal").addEventListener("show.bs.modal",function(e){e.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit Customer",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Update"):e.relatedTarget.classList.contains("add-btn")?(document.getElementById("exampleModalLabel").innerHTML="Add Customer",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Add Customer"):(document.getElementById("exampleModalLabel").innerHTML="List Customer",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")}),k(),document.getElementById("showModal").addEventListener("hidden.bs.modal",function(){h()}));document.querySelector("#customerList").addEventListener("click",function(){k()});var I=document.getElementById("customerTable");I.getElementsByTagName("tr");I.querySelectorAll(".list tr");var B=11,M=document.querySelectorAll(".tablelist-form");Array.prototype.slice.call(M).forEach(function(e){e.addEventListener("submit",function(t){if(!e.checkValidity())t.preventDefault(),t.stopPropagation();else if(t.preventDefault(),s.value!==""&&r.value!==""&&o.value!==""&&d.value!==""&&!g)n.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ'+B+"</a>",customer_name:s.value,email:r.value,date:o.value,phone:d.value,status:p(u.value)}),n.sort("id",{order:"desc"}),document.getElementById("close-modal").click(),b(),h(),C(),B++,Swal.fire({position:"center",icon:"success",title:"Customer inserted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0});else if(s.value!==""&&r.value!==""&&o.value!==""&&d.value!==""&&g){var i=n.get({id:y.value});Array.from(i).forEach(function(a){isid=new DOMParser().parseFromString(a._values.id,"text/html");var l=isid.body.firstElementChild.innerHTML;l==itemId&&a.values({id:'<a href="javascript:void(0);" class="fw-medium link-primary">'+y.value+"</a>",customer_name:s.value,email:r.value,date:o.value,phone:d.value,status:p(u.value)})}),document.getElementById("close-modal").click(),h(),Swal.fire({position:"center",icon:"success",title:"Customer updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}},!1)});var c=new Choices(u);function p(e){switch(e){case"Active":return'<span class="badge bg-success-subtle text-success text-uppercase">'+e+"</span>";case"Block":return'<span class="badge bg-danger-subtle text-danger text-uppercase">'+e+"</span>"}}function k(){Array.from(document.getElementsByName("checkAll")).forEach(function(e){e.addEventListener("click",function(t){t.target.checked?t.target.closest("tr").classList.add("table-active"):t.target.closest("tr").classList.remove("table-active")})})}function b(){L&&Array.from(L).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var i=n.get({id:itemId});Array.from(i).forEach(function(a){deleteid=new DOMParser().parseFromString(a._values.id,"text/html");var l=deleteid.body.firstElementChild,m=deleteid.body.firstElementChild.innerHTML;m==itemId&&document.getElementById("delete-record").addEventListener("click",function(){n.remove("id",l.outerHTML),document.getElementById("deleteRecordModal").click()})})})}),S&&Array.from(S).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var i=n.get({id:itemId});Array.from(i).forEach(function(a){isid=new DOMParser().parseFromString(a._values.id,"text/html");var l=isid.body.firstElementChild.innerHTML;if(l==itemId){g=!0,y.value=l,s.value=a._values.customer_name,r.value=a._values.email,o.value=a._values.date,d.value=a._values.phone,c&&c.destroy(),c=new Choices(u),val=new DOMParser().parseFromString(a._values.status,"text/html");var m=val.body.firstElementChild.innerHTML;c.setChoiceByValue(m),flatpickr("#date-field",{dateFormat:"d M, Y",defaultDate:a._values.date})}})})})}function h(){s.value="",r.value="",o.value="",d.value=""}document.querySelectorAll(".listjs-table").forEach(function(e){e.querySelector(".pagination-next").addEventListener("click",function(){e.querySelector(".pagination.listjs-pagination")&&e.querySelector(".pagination.listjs-pagination").querySelector(".active")&&e.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click()})});document.querySelectorAll(".listjs-table").forEach(function(e){e.querySelector(".pagination-prev").addEventListener("click",function(){e.querySelector(".pagination.listjs-pagination")&&e.querySelector(".pagination.listjs-pagination").querySelector(".active")&&e.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click()})});var w={valueNames:["name","born",{data:["id"]},{attr:"src",name:"image"},{attr:"href",name:"link"},{attr:"data-timestamp",name:"timestamp"}]},T=new List("users",w);T.add({name:"Leia",born:"1954",image:"build/images/users/avatar-5.jpg",id:5,timestamp:"67893"});var x={valueNames:["contact-name","contact-message"]};new List("contact-existing-list",x);new List("fuzzysearch-list",{valueNames:["name"]});new List("pagination-list",{valueNames:["pagi-list"],page:3,pagination:!0});
