function T(a){var e=new Date(a);time_s=e.getHours()+":"+e.getMinutes();var n=time_s.split(":"),t=n[0],i=n[1],l=t>=12?"PM":"AM";return t=t%12,t=t||12,i=i<10?"0"+i:i,t+":"+i+l}function D(a){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=new Date(a),t=""+e[n.getMonth()],i=""+n.getDate(),l=n.getFullYear();return t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),[i+" "+t,l].join(", ")}var S=document.getElementById("checkAll");S&&(S.onclick=function(){for(var a=document.querySelectorAll('.form-check-all input[type="checkbox"]'),e=document.querySelectorAll('.form-check-all input[type="checkbox"]:checked').length,n=0;n<a.length;n++)a[n].checked=this.checked,a[n].checked?a[n].closest("tr").classList.add("table-active"):a[n].closest("tr").classList.remove("table-active");e>0?document.getElementById("remove-actions").style.display="none":document.getElementById("remove-actions").style.display="block"});var x=8,f=!1,F={valueNames:["id","name","company_name","designation","date","email_id","phone","lead_score","tags"],page:x,pagination:!0,plugins:[ListPagination({left:2,right:2})]},s=new List("contactList",F).on("updated",function(a){a.matchingItems.length==0?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var e=a.i==1,n=a.i>a.matchingItems.length-a.page;document.querySelector(".pagination-prev.disabled")&&document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),e&&document.querySelector(".pagination-prev").classList.add("disabled"),n&&document.querySelector(".pagination-next").classList.add("disabled"),a.matchingItems.length<=x?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",a.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"});const E=new XMLHttpRequest;E.onload=function(){var a=JSON.parse(this.responseText);Array.from(a).forEach(function(e){var n=e.tags,t="";Array.from(n).forEach((i,l)=>{t+='<span class="badge bg-primary-subtle text-primary me-1">'+i+"</span>"}),s.add({id:`<a href="javascript:void(0);" class="fw-medium link-primary">#VZ${e.id}</a>`,name:'<div class="d-flex align-items-center">            <div class="flex-shrink-0"><img src="'+e.name[0]+'" alt="" class="avatar-xs rounded-circle"></div>            <div class="flex-grow-1 ms-2 name">'+e.name[1]+"</div>            </div>",company_name:e.company_name,desc:e.desc,designation:e.designation,date:D(e.date)+' <small class="text-muted">'+T(e.date)+"</small>",email_id:e.email_id,phone:e.phone,lead_score:e.lead_score,tags:t}),s.sort("id",{order:"desc"}),w()}),s.remove("id",'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ001</a>')};E.open("GET","build/json/contact-list.json");E.send();isCount=new DOMParser().parseFromString(s.items.slice(-1)[0]._values.id,"text/html");document.querySelector("#customer-image-input").addEventListener("change",function(){var a=document.querySelector("#customer-img"),e=document.querySelector("#customer-image-input").files[0],n=new FileReader;n.addEventListener("load",function(){a.src=n.result},!1),e&&n.readAsDataURL(e)});var p=document.getElementById("id-field"),y=document.getElementById("customer-img"),r=document.getElementById("customername-field"),d=document.getElementById("company_name-field"),o=document.getElementById("designation-field"),c=document.getElementById("email_id-field"),m=document.getElementById("phone-field"),u=document.getElementById("lead_score-field");document.getElementById("add-btn");document.getElementById("edit-btn");var _=document.getElementsByClassName("remove-item-btn"),B=document.getElementsByClassName("edit-item-btn");viewBtns=document.getElementsByClassName("view-item-btn");w();document.getElementById("showModal").addEventListener("show.bs.modal",function(a){a.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit Contact",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Update"):a.relatedTarget.classList.contains("add-btn")?(document.getElementById("exampleModalLabel").innerHTML="Add Contact",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Add Contact"):(document.getElementById("exampleModalLabel").innerHTML="List Contact",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")});q();document.getElementById("showModal").addEventListener("hidden.bs.modal",function(a){b()});document.querySelector("#contactList").addEventListener("click",function(){q()});var M=document.getElementById("customerTable");M.getElementsByTagName("tr");M.querySelectorAll(".list tr");var L=new Date().toUTCString().slice(5,16);function h(){var a=new Date().getHours()>=12?"PM":"AM",e=new Date().getHours()>12?new Date().getHours()%12:new Date().getHours(),n=new Date().getMinutes()<10?"0"+new Date().getMinutes():new Date().getMinutes();return e<10?"0"+e+":"+n+" "+a:e+":"+n+" "+a}setInterval(h,1e3);var k=11,v=new Choices("#taginput-choices",{removeItemButton:!0}),j=v.getValue(!0);Array.from(j).forEach((a,e)=>{});var H=document.querySelectorAll(".tablelist-form");Array.prototype.slice.call(H).forEach(function(a){a.addEventListener("submit",function(e){if(!a.checkValidity())e.preventDefault(),e.stopPropagation();else if(e.preventDefault(),r.value!==""&&d.value!==""&&c.value!==""&&m.value!==""&&u.value!==""&&o.value!==""&&!f){var n=v.getValue(!0),t="";Array.from(n).forEach((l,g)=>{t+='<span class="badge bg-primary-subtle text-primary me-1">'+l+"</span>"}),s.add({id:`<a href="javascript:void(0);" class="fw-medium link-primary">#VZ${k}</a>`,name:'<div class="d-flex align-items-center">                    <div class="flex-shrink-0"><img src="'+y.src+'" alt="" class="avatar-xs rounded-circle object-fit-cover"></div>                    <div class="flex-grow-1 ms-2 name">'+r.value+"</div>                    </div>",company_name:d.value,designation:o.value,email_id:c.value,phone:m.value,lead_score:u.value,tags:t,date:L+' <small class="text-muted">'+h()+"</small>"}),s.sort("id",{order:"desc"}),document.getElementById("close-modal").click(),b(),w(),k++,Swal.fire({position:"center",icon:"success",title:"Contact inserted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}else if(r.value!==""&&d.value!==""&&c.value!==""&&m.value!==""&&u.value!==""&&o.value!==""&&f){var i=s.get({id:p.value});Array.from(i).forEach(function(l){isid=new DOMParser().parseFromString(l._values.id,"text/html");var g=isid.body.firstElementChild.innerHTML,C=v.getValue(!0),I="";Array.from(C).forEach((A,P)=>{I+='<span class="badge bg-primary-subtle text-primary me-1">'+A+"</span>"}),g==itemId&&l.values({id:`<a href="javascript:void(0);" class="fw-medium link-primary">#VZ${p.value}</a>`,name:'<div class="d-flex align-items-center">                            <div class="flex-shrink-0"><img src="'+y.src+'" alt="" class="avatar-xs rounded-circle object-fit-cover"></div>                            <div class="flex-grow-1 ms-2 name">'+r.value+"</div>                            </div>",company_name:d.value,designation:o.value,email_id:c.value,phone:m.value,lead_score:u.value,tags:I,date:L+' <small class="text-muted">'+h()+"</small>"})}),document.getElementById("close-modal").click(),b(),Swal.fire({position:"center",icon:"success",title:"Contact updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}},!1)});function q(){Array.from(document.getElementsByName("chk_child")).forEach(function(a){a.addEventListener("change",function(e){a.checked==!0?e.target.closest("tr").classList.add("table-active"):e.target.closest("tr").classList.remove("table-active");var n=document.querySelectorAll('[name="chk_child"]:checked').length;e.target.closest("tr").classList.contains("table-active"),n>0?document.getElementById("remove-actions").style.display="block":document.getElementById("remove-actions").style.display="none"})})}function w(){_&&Array.from(_).forEach(function(a){a.addEventListener("click",function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var n=s.get({id:itemId});Array.from(n).forEach(function(t){deleteid=new DOMParser().parseFromString(t._values.id,"text/html");var i=deleteid.body.firstElementChild,l=deleteid.body.firstElementChild.innerHTML;l==itemId&&document.getElementById("delete-record").addEventListener("click",function(){s.remove("id",i.outerHTML),document.getElementById("deleteRecord-close").click()})})})}),B&&Array.from(B).forEach(function(a){a.addEventListener("click",function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var n=s.get({id:itemId});Array.from(n).forEach(function(t){isid=new DOMParser().parseFromString(t._values.id,"text/html");var i=isid.body.firstElementChild.innerHTML,l=new DOMParser().parseFromString(t._values.tags,"text/html").body.querySelectorAll("span.badge");i==itemId&&(f=!0,p.value=i,y.src=new DOMParser().parseFromString(t._values.name,"text/html").body.querySelector("img").src,r.value=new DOMParser().parseFromString(t._values.name,"text/html").body.querySelector(".name").innerHTML,d.value=t._values.company_name,o.value=t._values.designation,c.value=t._values.email_id,m.value=t._values.phone,u.value=t._values.lead_score,l&&Array.from(l).forEach(g=>{v.setChoiceByValue(g.innerHTML)}))})})}),Array.from(viewBtns).forEach(function(a){a.addEventListener("click",function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var n=s.get({id:itemId});Array.from(n).forEach(function(t){isid=new DOMParser().parseFromString(t._values.id,"text/html");var i=isid.body.firstElementChild.innerHTML;if(i==itemId){var l=`
                        <div class="card-body text-center">
                            <div class="position-relative d-inline-block">
                                <img src="${new DOMParser().parseFromString(t._values.name,"text/html").body.querySelector("img").src}" alt=""
                                    class="avatar-lg rounded-circle img-thumbnail object-fit-cover">
                                <span class="contact-active position-absolute rounded-circle bg-success"><span
                                        class="visually-hidden"></span>
                            </div>
                            <h5 class="mt-4 mb-1">${new DOMParser().parseFromString(t._values.name,"text/html").body.querySelector(".name").innerHTML}</h5>
                            <p class="text-muted">${t._values.company_name}</p>

                            <ul class="list-inline mb-0">
                                <li class="list-inline-item avatar-xs">
                                    <a href="javascript:void(0);"
                                        class="avatar-title bg-success-subtle text-success fs-15 rounded">
                                        <i class="ri-phone-line"></i>
                                    </a>
                                </li>
                                <li class="list-inline-item avatar-xs">
                                    <a href="javascript:void(0);"
                                        class="avatar-title bg-danger-subtle text-danger fs-15 rounded">
                                        <i class="ri-mail-line"></i>
                                    </a>
                                </li>
                                <li class="list-inline-item avatar-xs">
                                    <a href="javascript:void(0);"
                                        class="avatar-title bg-warning-subtle text-warning fs-15 rounded">
                                        <i class="ri-question-answer-line"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <h6 class="text-muted text-uppercase fw-semibold mb-3">Personal Information</h6>
                            <p class="text-muted mb-4">${t._values.desc}</p>
                            <div class="table-responsive table-card">
                                <table class="table table-borderless mb-0">
                                    <tbody>
                                        <tr>
                                            <td class="fw-medium" scope="row">Designation</td>
                                            <td>${t._values.designation}</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Email ID</td>
                                            <td>${t._values.email_id}</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Phone No</td>
                                            <td>${t._values.phone}</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Lead Score</td>
                                            <td>${t._values.lead_score}</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Tags</td>
                                            <td>${t._values.tags}</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-medium" scope="row">Last Contacted</td>
                                            <td>${t._values.date} <small class="text-muted"></small></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>`;document.getElementById("contact-view-detail").innerHTML=l}})})})}function b(){y.src="build/images/users/user-dummy-img.jpg",r.value="",d.value="",o.value="",c.value="",m.value="",u.value="",v.removeActiveItems(),v.setChoiceByValue("0")}document.querySelector(".pagination-next").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click()});document.querySelector(".pagination-prev").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click()});
