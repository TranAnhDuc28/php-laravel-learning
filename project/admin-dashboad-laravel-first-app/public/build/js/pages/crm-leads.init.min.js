function p(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=new Date(e),n=""+t[a.getMonth()],l=""+a.getDate(),i=a.getFullYear();return n.length<2&&(n="0"+n),l.length<2&&(l="0"+l),[l+" "+n,i].join(", ")}var I=document.getElementById("checkAll");I&&(I.onclick=function(){for(var e=document.querySelectorAll('.form-check-all input[type="checkbox"]'),t=document.querySelectorAll('.form-check-all input[type="checkbox"]:checked').length,a=0;a<e.length;a++)e[a].checked=this.checked,e[a].checked?e[a].closest("tr").classList.add("table-active"):e[a].closest("tr").classList.remove("table-active");t>0?document.getElementById("remove-actions").style.display="none":document.getElementById("remove-actions").style.display="block"});var q=8,f=!1,F={valueNames:["id","name","company_name","date","leads_score","phone","location","tags",{attr:"src",name:"image_src"}],page:q,pagination:!0,plugins:[ListPagination({left:2,right:2})]},o=new List("leadsList",F).on("updated",function(e){e.matchingItems.length==0?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var t=e.i==1,a=e.i>e.matchingItems.length-e.page;document.querySelector(".pagination-prev.disabled")&&document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),t&&document.querySelector(".pagination-prev").classList.add("disabled"),a&&document.querySelector(".pagination-next").classList.add("disabled"),e.matchingItems.length<=q?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",e.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"});const b=new XMLHttpRequest;b.onload=function(){var e=JSON.parse(this.responseText);Array.from(e).forEach(function(t){var a=t.tags,n="";Array.from(a).forEach((l,i)=>{n+='<span class="badge bg-primary-subtle text-primary me-1">'+l+"</span>"}),o.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ'+t.id+"</a>",image_src:t.image_src,name:t.name,company_name:t.company_name,date:p(t.date),leads_score:t.leads_score,phone:t.phone,location:t.location,tags:n}),o.sort("id",{order:"desc"}),L()}),o.remove("id",'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ2101</a>')};b.open("GET","build/json/leads-list.json");b.send();document.querySelector("#lead-image-input").addEventListener("change",function(){var e=document.querySelector("#lead-img"),t=document.querySelector("#lead-image-input").files[0],a=new FileReader;a.addEventListener("load",function(){e.src=a.result},!1),t&&a.readAsDataURL(t)});isCount=new DOMParser().parseFromString(o.items.slice(-1)[0]._values.id,"text/html");isCount.body.firstElementChild.innerHTML;var h=document.getElementById("id-field"),r=document.getElementById("leadname-field"),v=document.getElementById("lead-img"),d=document.getElementById("company_name-field"),s=document.getElementById("date-field"),c=document.getElementById("leads_score-field"),m=document.getElementById("phone-field"),u=document.getElementById("location-field");document.getElementById("add-btn");document.getElementById("edit-btn");var k=document.getElementsByClassName("remove-item-btn"),S=document.getElementsByClassName("edit-item-btn");L();document.getElementById("showModal").addEventListener("show.bs.modal",function(e){e.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit Lead",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Update"):e.relatedTarget.classList.contains("add-btn")?(document.getElementById("exampleModalLabel").innerHTML="Add Lead",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Add Lead"):(document.getElementById("exampleModalLabel").innerHTML="List Lead",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")});A();document.getElementById("showModal").addEventListener("hidden.bs.modal",function(){E()});document.querySelector("#leadsList").addEventListener("click",function(){A()});var M=document.getElementById("customerTable");M.getElementsByTagName("tr");M.querySelectorAll(".list tr");var _=11,y=new Choices("#taginput-choices",{removeItemButton:!0}),T=y.getValue(!0);Array.from(T).forEach((e,t)=>{});var x=document.querySelectorAll(".tablelist-form");Array.prototype.slice.call(x).forEach(function(e){e.addEventListener("submit",function(t){if(!e.checkValidity())t.preventDefault(),t.stopPropagation();else if(t.preventDefault(),r.value!==""&&d.value!==""&&s.value!==""&&c.value!==""&&m.value!==""&&u.value!==""&&!f){var a=y.getValue(!0),n="";Array.from(a).forEach((i,g)=>{n+='<span class="badge bg-primary-subtle text-primary me-1">'+i+"</span>"}),o.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ'+_+"</a>",image_src:v.src,name:r.value,company_name:d.value,date:p(s.value),leads_score:c.value,phone:m.value,location:u.value,tags:n}),o.sort("id",{order:"desc"}),document.getElementById("close-modal").click(),E(),L(),_++,Swal.fire({position:"center",icon:"success",title:"Lead inserted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}else if(r.value!==""&&d.value!==""&&s.value!==""&&c.value!==""&&m.value!==""&&u.value!==""&&f){var l=o.get({id:h.value});Array.from(l).forEach(function(i){isid=new DOMParser().parseFromString(i._values.id,"text/html");var g=isid.body.firstElementChild.innerHTML,C=y.getValue(!0),B="";Array.from(C).forEach((w,j)=>{B+='<span class="badge bg-primary-subtle text-primary me-1">'+w+"</span>"}),g==itemId&&i.values({id:'<a href="javascript:void(0);" class="fw-medium link-primary">'+h.value+"</a>",image_src:v.src,name:r.value,company_name:d.value,date:p(s.value),leads_score:c.value,phone:m.value,tags:B,location:u.value})}),document.getElementById("close-modal").click(),E(),Swal.fire({position:"center",icon:"success",title:"Lead updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}},!1)});function A(){Array.from(document.getElementsByName("chk_child")).forEach(function(e){e.addEventListener("change",function(t){e.checked==!0?t.target.closest("tr").classList.add("table-active"):t.target.closest("tr").classList.remove("table-active");var a=document.querySelectorAll('[name="chk_child"]:checked').length;t.target.closest("tr").classList.contains("table-active"),a>0?document.getElementById("remove-actions").style.display="block":document.getElementById("remove-actions").style.display="none"})})}function L(){k&&Array.from(k).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var a=o.get({id:itemId});Array.from(a).forEach(function(n){deleteid=new DOMParser().parseFromString(n._values.id,"text/html");var l=deleteid.body.firstElementChild,i=deleteid.body.firstElementChild.innerHTML;i==itemId&&document.getElementById("delete-record").addEventListener("click",function(){o.remove("id",l.outerHTML),document.getElementById("deleteRecord-close").click()})})})}),S&&Array.from(S).forEach(function(e){e.addEventListener("click",function(t){t.target.closest("tr").children[1].innerText,itemId=t.target.closest("tr").children[1].innerText;var a=o.get({id:itemId});Array.from(a).forEach(function(n){isid=new DOMParser().parseFromString(n._values.id,"text/html");var l=isid.body.firstElementChild.innerHTML,i=new DOMParser().parseFromString(n._values.tags,"text/html").body.querySelectorAll("span.badge");l==itemId&&(f=!0,h.value=l,v.src=n._values.image_src,r.value=n._values.name,d.value=n._values.company_name,s.value=n._values.date,c.value=n._values.leads_score,m.value=n._values.phone,i&&Array.from(i).forEach(g=>{y.setChoiceByValue(g.innerHTML)}),u.value=n._values.location,flatpickr("#date-field",{dateFormat:"d M, Y",defaultDate:n._values.date}))})})})}function E(){v.src="build/images/users/user-dummy-img.jpg",r.value="",d.value="",s.value="",c.value="",m.value="",u.value="",y.removeActiveItems(),y.setChoiceByValue("0")}document.querySelector(".pagination-next").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click()});document.querySelector(".pagination-prev").addEventListener("click",function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click()});
